import{o as i,b as a,p as d}from"./BcHN-y2m.js";function b(n,o,e){if(n==null)return o(void 0),i;const s=a(()=>n.subscribe(o,e));return s.unsubscribe?()=>s.unsubscribe():s}const r=[];function p(n,o=i){let e=null;const s=new Set;function c(u){if(d(n,u)&&(n=u,e)){const f=!r.length;for(const t of s)t[1](),r.push(t,n);if(f){for(let t=0;t<r.length;t+=2)r[t][0](r[t+1]);r.length=0}}}function l(u){c(u(n))}return{set:c,update:l,subscribe:function(u,f=i){const t=[u,f];return s.add(t),s.size===1&&(e=o(c,l)||i),u(n),()=>{s.delete(t),s.size===0&&e&&(e(),e=null)}}}}function g(n){let o;return b(n,e=>o=e)(),o}export{g,b as s,p as w};
