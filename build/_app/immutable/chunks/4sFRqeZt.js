import{aT as N,g as D,aw as V,aS as ie,b3 as vt}from"./BcHN-y2m.js";import{w as ye}from"./BHBe78Jx.js";import{o as Me}from"./iLjeF4RL.js";class be{constructor(t,r){this.status=t,this.body=typeof r=="string"?{message:r}:r||{message:`Error: ${t}`}}toString(){return JSON.stringify(this.body)}}class ke{constructor(t,r){this.status=t,this.location=r}}class _e extends Error{constructor(t,r,a){super(a),this.status=t,this.text=r}}function yt(e){for(const t in e)e[t]=decodeURIComponent(e[t]);return e}function Se({href:e}){return e.split("#")[0]}new URL("sveltekit-internal://"),new TextEncoder,new TextDecoder;const bt=window.fetch;window.fetch=(e,t)=>((e instanceof Request?e.method:t?.method||"GET")!=="GET"&&Q.delete(Ee(e)),bt(e,t));const Q=new Map;function kt(e,t){const r=Ee(e,t),a=document.querySelector(r);if(a?.textContent){a.remove();let{body:i,...l}=JSON.parse(a.textContent);const o=a.getAttribute("data-ttl");return o&&Q.set(r,{body:i,init:l,ttl:1e3*Number(o)}),a.getAttribute("data-b64")!==null&&(i=(function(n){const s=atob(n),c=new Uint8Array(s.length);for(let f=0;f<s.length;f++)c[f]=s.charCodeAt(f);return c})(i)),Promise.resolve(new Response(i,l))}return window.fetch(e,t)}function Ee(e,t){let r=`script[data-sveltekit-fetched][data-url=${JSON.stringify(e instanceof Request?e.url:e)}]`;if(t?.headers||t?.body){const a=[];t.headers&&a.push([...new Headers(t.headers)].join(",")),t.body&&(typeof t.body=="string"||ArrayBuffer.isView(t.body))&&a.push(t.body),r+=`[data-hash="${(function(...i){let l=5381;for(const o of i)if(typeof o=="string"){let n=o.length;for(;n;)l=33*l^o.charCodeAt(--n)}else{if(!ArrayBuffer.isView(o))throw new TypeError("value must be a string or TypedArray");{const n=new Uint8Array(o.buffer,o.byteOffset,o.byteLength);let s=n.length;for(;s;)l=33*l^n[--s]}}return(l>>>0).toString(36)})(...a)}"]`}return r}const _t=/^(\[)?(\.\.\.)?(\w+)(?:=(\w+))?(\])?$/;function St(e){const t=[];var r;return{pattern:e==="/"?/^\/$/:new RegExp(`^${(r=e,r.slice(1).split("/").filter(Et)).map(a=>{const i=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(a);if(i)return t.push({name:i[1],matcher:i[2],optional:!1,rest:!0,chained:!0}),"(?:/([^]*))?";const l=/^\[\[(\w+)(?:=(\w+))?\]\]$/.exec(a);if(l)return t.push({name:l[1],matcher:l[2],optional:!0,rest:!1,chained:!0}),"(?:/([^/]+))?";if(!a)return;const o=a.split(/\[(.+?)\](?!\])/);return"/"+o.map((n,s)=>{if(s%2){if(n.startsWith("x+"))return Re(String.fromCharCode(parseInt(n.slice(2),16)));if(n.startsWith("u+"))return Re(String.fromCharCode(...n.slice(2).split("-").map(d=>parseInt(d,16))));const c=_t.exec(n),[,f,y,v,h]=c;return t.push({name:v,matcher:h,optional:!!f,rest:!!y,chained:!!y&&s===1&&o[0]===""}),y?"([^]*?)":f?"([^/]*)?":"([^/]+?)"}return Re(n)}).join("")}).join("")}/?$`),params:t}}function Et(e){return e!==""&&!/^\([^)]+\)$/.test(e)}function Re(e){return e.normalize().replace(/[[\]]/g,"\\$&").replace(/%/g,"%25").replace(/\//g,"%2[Ff]").replace(/\?/g,"%3[Ff]").replace(/#/g,"%23").replace(/[.*+?^${}()|\\]/g,"\\$&")}function Rt({nodes:e,server_loads:t,dictionary:r,matchers:a}){const i=new Set(t);return Object.entries(r).map(([n,[s,c,f]])=>{const{pattern:y,params:v}=St(n),h={id:n,exec:d=>{const m=y.exec(d);if(m)return(function(p,u,w){const U={},b=p.slice(1),R=b.filter(_=>_!==void 0);let k=0;for(let _=0;_<u.length;_+=1){const g=u[_];let L=b[_-k];if(g.chained&&g.rest&&k&&(L=b.slice(_-k,_+1).filter(S=>S).join("/"),k=0),L===void 0){if(!g.rest)continue;L=""}if(!g.matcher||w[g.matcher](L)){U[g.name]=L;const S=u[_+1],$=b[_+1];S&&!S.rest&&S.optional&&$&&g.chained&&(k=0),S||$||Object.keys(U).length!==R.length||(k=0);continue}if(!g.optional||!g.chained)return;k++}if(!k)return U})(m,v,a)},errors:[1,...f||[]].map(d=>e[d]),layouts:[0,...c||[]].map(o),leaf:l(s)};return h.errors.length=h.layouts.length=Math.max(h.errors.length,h.layouts.length),h});function l(n){const s=n<0;return s&&(n=~n),[s,e[n]]}function o(n){return n===void 0?n:[i.has(n),e[n]]}}function We(e,t=JSON.parse){try{return t(sessionStorage[e])}catch{}}function ze(e,t,r=JSON.stringify){const a=r(t);try{sessionStorage[e]=a}catch{}}const O=globalThis.__sveltekit_1izmo1q?.base??"",Lt=globalThis.__sveltekit_1izmo1q?.assets??O??"",Ge="sveltekit:snapshot",Je="sveltekit:scroll",Ke="sveltekit:states",Ut="sveltekit:pageurl",K="sveltekit:history",Z="sveltekit:navigation",z={tap:1,hover:2,viewport:3,eager:4,off:-1,false:-1},Le=location.origin;function He(e){if(e instanceof URL)return e;let t=document.baseURI;if(!t){const r=document.getElementsByTagName("base");t=r.length?r[0].href:document.URL}return new URL(e,t)}function G(){return{x:pageXOffset,y:pageYOffset}}function H(e,t){return e.getAttribute(`data-sveltekit-${t}`)}const Xe={...z,"":z.hover};function Ye(e){let t=e.assignedSlot??e.parentNode;return t?.nodeType===11&&(t=t.host),t}function Qe(e,t){for(;e&&e!==t;){if(e.nodeName.toUpperCase()==="A"&&e.hasAttribute("href"))return e;e=Ye(e)}}function Ue(e,t,r){let a;try{if(a=new URL(e instanceof SVGAElement?e.href.baseVal:e.href,document.baseURI),r&&a.hash.match(/^#[^/]/)){const l=location.hash.split("#")[1]||"/";a.hash=`#${l}${a.hash}`}}catch{}const i=e instanceof SVGAElement?e.target.baseVal:e.target;return{url:a,external:!a||!!i||ce(a,t,r)||(e.getAttribute("rel")||"").split(/\s+/).includes("external"),target:i,download:a?.origin===Le&&e.hasAttribute("download")}}function le(e){let t=null,r=null,a=null,i=null,l=null,o=null,n=e;for(;n&&n!==document.documentElement;)a===null&&(a=H(n,"preload-code")),i===null&&(i=H(n,"preload-data")),t===null&&(t=H(n,"keepfocus")),r===null&&(r=H(n,"noscroll")),l===null&&(l=H(n,"reload")),o===null&&(o=H(n,"replacestate")),n=Ye(n);function s(c){switch(c){case"":case"true":return!0;case"off":case"false":return!1;default:return}}return{preload_code:Xe[a??"off"],preload_data:Xe[i??"off"],keepfocus:s(t),noscroll:s(r),reload:s(l),replace_state:s(o)}}function Ze(e){const t=ye(e);let r=!0;return{notify:function(){r=!0,t.update(a=>a)},set:function(a){r=!1,t.set(a)},subscribe:function(a){let i;return t.subscribe(l=>{(i===void 0||r&&l!==i)&&a(i=l)})}}}const et={v:()=>{}};function xt(){const{set:e,subscribe:t}=ye(!1);let r;return{subscribe:t,check:async function(){clearTimeout(r);try{const a=await fetch(`${Lt}/_app/version.json`,{headers:{pragma:"no-cache","cache-control":"no-cache"}});if(!a.ok)return!1;const i=(await a.json()).version!=="1771338075735";return i&&(e(!0),et.v(),clearTimeout(r)),i}catch{return!1}}}}function ce(e,t,r){return e.origin!==Le||!e.pathname.startsWith(t)||!!r&&e.pathname!==location.pathname}function At(e){}const tt=new Set(["load","prerender","csr","ssr","trailingSlash","config"]);[...tt];const Tt=new Set([...tt]);function xe(e){return e instanceof be||e instanceof _e?e.status:500}let C,ee,Ae;[...Tt],Me.toString().includes("$$")||/function \w+\(\) \{\}/.test(Me.toString())?(C={data:{},form:null,error:null,params:{},route:{id:null},state:{},status:-1,url:new URL("https://example.com")},ee={current:null},Ae={current:!1}):(C=new class{#e=N({});get data(){return D(this.#e)}set data(e){V(this.#e,e)}#t=N(null);get form(){return D(this.#t)}set form(e){V(this.#t,e)}#r=N(null);get error(){return D(this.#r)}set error(e){V(this.#r,e)}#n=N({});get params(){return D(this.#n)}set params(e){V(this.#n,e)}#o=N({id:null});get route(){return D(this.#o)}set route(e){V(this.#o,e)}#a=N({});get state(){return D(this.#a)}set state(e){V(this.#a,e)}#s=N(-1);get status(){return D(this.#s)}set status(e){V(this.#s,e)}#i=N(new URL("https://example.com"));get url(){return D(this.#i)}set url(e){V(this.#i,e)}},ee=new class{#e=N(null);get current(){return D(this.#e)}set current(e){V(this.#e,e)}},Ae=new class{#e=N(!1);get current(){return D(this.#e)}set current(e){V(this.#e,e)}},et.v=()=>Ae.current=!0);const Ct=new Set(["icon","shortcut icon","apple-touch-icon"]),M=We(Je)??{},te=We(Ge)??{},B={url:Ze({}),page:Ze({}),navigating:ye(null),updated:xt()};function Te(e){M[e]=G()}function re(e,t=!1){return t?location.replace(e.href):location.href=e.href,new Promise(()=>{})}async function rt(){if("serviceWorker"in navigator){const e=await navigator.serviceWorker.getRegistration(O||"/");e&&await e.update()}}function nt(){}let Ce,$e,ue,F,Pe,x;const fe=[],de=[];let q=null;function Oe(){q?.fork?.then(e=>e?.discard()),q=null}const pe=new Map,ot=new Set,$t=new Set,ne=new Set;let at,A,I,J,E={branch:[],error:null,url:null},st=!1,he=!1,it=!0,oe=!1,ae=!1,lt=!1,Ie=!1;const me=new Set,ct=new Map;async function Pt(e,t,r){globalThis.__sveltekit_1izmo1q?.data&&globalThis.__sveltekit_1izmo1q.data,document.URL!==location.href&&(location.href=location.href),x=e,await e.hooks.init?.(),Ce=Rt(e),F=document.documentElement,Pe=t,$e=e.nodes[0],ue=e.nodes[1],$e(),ue(),A=history.state?.[K],I=history.state?.[Z],A||(A=I=Date.now(),history.replaceState({...history.state,[K]:A,[Z]:I},""));const a=M[A];function i(){a&&(history.scrollRestoration="manual",scrollTo(a.x,a.y))}r?(i(),await(async function(l,{status:o=200,error:n,node_ids:s,params:c,route:f,server_route:y,data:v,form:h}){st=!0;const d=new URL(location.href);let m,p;({params:c={},route:f={id:null}}=await we(d,!1)||{}),m=Ce.find(({id:w})=>w===f.id);let u=!0;try{const w=s.map(async(b,R)=>{const k=v[R];var _;return k?.uses&&(k.uses=(_=k.uses,{dependencies:new Set(_?.dependencies??[]),params:new Set(_?.params??[]),parent:!!_?.parent,route:!!_?.route,url:!!_?.url,search_params:new Set(_?.search_params??[])})),qe({loader:x.nodes[b],url:d,params:c,route:f,parent:async()=>{const g={};for(let L=0;L<R;L+=1)Object.assign(g,(await w[L]).data);return g},server_data_node:Ne(k)})}),U=await Promise.all(w);if(m){const b=m.layouts;for(let R=0;R<b.length;R++)b[R]||U.splice(R,0,void 0)}p=ge({url:d,params:c,branch:U,status:o,error:n,form:h,route:m??null})}catch(w){if(w instanceof ke)return void await re(new URL(w.location,location.href));p=await De({status:xe(w),error:await se(w,{url:d,params:c,route:f}),url:d,route:f}),l.textContent="",u=!1}p.props.page&&(p.props.page.state={}),await pt(p,l,u)})(Pe,r)):(await X({type:"enter",url:He(x.hash?Nt(new URL(location.href)):location.href),replace_state:!0}),i()),(function(){history.scrollRestoration="manual",addEventListener("beforeunload",o=>{let n=!1;if(dt(),!oe){const s=Be(E,void 0,null,"leave"),c={...s.navigation,cancel:()=>{n=!0,s.reject(new Error("navigation cancelled"))}};ot.forEach(f=>f(c))}n?(o.preventDefault(),o.returnValue=""):history.scrollRestoration="auto"}),addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&dt()}),navigator.connection?.saveData||(function(){let o,n,s={element:void 0,href:void 0};function c(h){h.defaultPrevented||y(h.composedPath()[0],z.tap)}F.addEventListener("mousemove",h=>{const d=h.target;clearTimeout(o),o=setTimeout(()=>{y(d,z.hover)},20)}),F.addEventListener("mousedown",c),F.addEventListener("touchstart",c,{passive:!0});const f=new IntersectionObserver(h=>{for(const d of h)d.isIntersecting&&(je(new URL(d.target.href)),f.unobserve(d.target))},{threshold:0});async function y(h,d){const m=Qe(h,F),p=m===s.element&&m?.href===s.href&&d>=n;if(!m||p)return;const{url:u,external:w,download:U}=Ue(m,O,x.hash);if(w||U)return;const b=le(m),R=u&&ve(E.url)===ve(u);if(!b.reload&&!R)if(d<=b.preload_data){s={element:m,href:m.href},n=z.tap;const k=await we(u,!1);if(!k)return;(async function(_){if(_.id!==q?.id){Oe();const g={};me.add(g),q={id:_.id,token:g,promise:ht({..._,preload:g}).then(L=>(me.delete(g),L.type==="loaded"&&L.state.error&&Oe(),L)),fork:null}}q.promise})(k)}else d<=b.preload_code&&(s={element:m,href:m.href},n=d,je(u))}function v(){f.disconnect();for(const h of F.querySelectorAll("a")){const{url:d,external:m,download:p}=Ue(h,O,x.hash);if(m||p)continue;const u=le(h);u.reload||(u.preload_code===z.viewport&&f.observe(h),u.preload_code===z.eager&&je(d))}}ne.add(v),v()})(),F.addEventListener("click",async o=>{if(o.button||o.which!==1||o.metaKey||o.ctrlKey||o.shiftKey||o.altKey||o.defaultPrevented)return;const n=Qe(o.composedPath()[0],F);if(!n)return;const{url:s,external:c,target:f,download:y}=Ue(n,O,x.hash);if(!s)return;if(f==="_parent"||f==="_top"){if(window.parent!==window)return}else if(f&&f!=="_self")return;const v=le(n);if(!(n instanceof SVGAElement)&&s.protocol!==location.protocol&&s.protocol!=="https:"&&s.protocol!=="http:"||y)return;const[h,d]=(x.hash?s.hash.replace(/^#/,""):s.href).split("#"),m=h===Se(location);if(!c&&(!v.reload||m&&d)){if(d!==void 0&&m){const[,p]=E.url.href.split("#");if(p===d){if(o.preventDefault(),d===""||d==="top"&&n.ownerDocument.getElementById("top")===null)scrollTo({top:0});else{const u=n.ownerDocument.getElementById(decodeURIComponent(d));u&&(u.scrollIntoView(),u.focus())}return}if(ae=!0,Te(A),l(s),!v.replace_state)return;ae=!1}o.preventDefault(),await new Promise(p=>{requestAnimationFrame(()=>{setTimeout(p,0)}),setTimeout(p,100)}),await X({type:"link",url:s,keepfocus:v.keepfocus,noscroll:v.noscroll,replace_state:v.replace_state??s.href===location.href,event:o})}else mt({url:s,type:"link",event:o})?oe=!0:o.preventDefault()}),F.addEventListener("submit",o=>{if(o.defaultPrevented)return;const n=HTMLFormElement.prototype.cloneNode.call(o.target),s=o.submitter;if((s?.formTarget||n.target)==="_blank"||(s?.formMethod||n.method)!=="get")return;const c=new URL(s?.hasAttribute("formaction")&&s?.formAction||n.action);if(ce(c,O,!1))return;const f=o.target,y=le(f);if(y.reload)return;o.preventDefault(),o.stopPropagation();const v=new FormData(f,s);c.search=new URLSearchParams(v).toString(),X({type:"form",url:c,keepfocus:y.keepfocus,noscroll:y.noscroll,replace_state:y.replace_state??c.href===location.href,event:o})}),addEventListener("popstate",async o=>{if(!Ve)if(o.state?.[K]){const n=o.state[K];if(J={},n===A)return;const s=M[n],c=o.state[Ke]??{},f=new URL(o.state[Ut]??location.href),y=o.state[Z],v=!!E.url&&Se(location)===Se(E.url);if(y===I&&(lt||v))return c!==C.state&&(C.state=c),l(f),M[A]=G(),s&&scrollTo(s.x,s.y),void(A=n);const h=n-A;await X({type:"popstate",url:f,popped:{state:c,scroll:s,delta:h},accept:()=>{A=n,I=y},block:()=>{history.go(-h)},nav_token:J,event:o})}else ae||(l(new URL(location.href)),x.hash&&location.reload())}),addEventListener("hashchange",()=>{ae&&(ae=!1,history.replaceState({...history.state,[K]:++A,[Z]:I},"",location.href))});for(const o of document.querySelectorAll("link"))Ct.has(o.rel)&&(o.href=o.href);function l(o){E.url=C.url=o,B.page.set(Fe(C)),B.page.notify()}addEventListener("pageshow",o=>{o.persisted&&B.navigating.set(ee.current=null)})})()}function ut(e){de.some(t=>t?.snapshot)&&(te[e]=de.map(t=>t?.snapshot?.capture()))}function ft(e){te[e]?.forEach((t,r)=>{de[r]?.snapshot?.restore(t)})}function dt(){Te(A),ze(Je,M),ut(I),ze(Ge,te)}async function je(e){const t=(await we(e,!1))?.route;t&&await Promise.all([...t.layouts,t.leaf].map(r=>r?.[1]()))}async function pt(e,t,r){E=e.state;const a=document.querySelector("style[data-sveltekit]");if(a&&a.remove(),Object.assign(C,e.props.page),at=new x.root({target:t,props:{...e.props,stores:B,components:de},hydrate:r,sync:!1}),await Promise.resolve(),ft(I),r){const i={from:null,to:{params:E.params,route:{id:E.route?.id??null},url:new URL(location.href),scroll:M[A]??G()},willUnload:!1,type:"enter",complete:Promise.resolve()};ne.forEach(l=>l(i))}he=!0}function ge({url:e,params:t,branch:r,status:a,error:i,route:l,form:o}){let n="never";if(!O||e.pathname!==O&&e.pathname!==O+"/")for(const m of r)m?.slash!==void 0&&(n=m.slash);else n="always";var s,c;e.pathname=(s=e.pathname,c=n,s==="/"||c==="ignore"?s:c==="never"?s.endsWith("/")?s.slice(0,-1):s:c!=="always"||s.endsWith("/")?s:s+"/"),e.search=e.search;const f={type:"loaded",state:{url:e,params:t,branch:r,error:i,route:l},props:{constructors:(y=r,y.filter(m=>m!=null)).map(m=>m.node.component),page:Fe(C)}};var y;o!==void 0&&(f.props.form=o);let v={},h=!C,d=0;for(let m=0;m<Math.max(r.length,E.branch.length);m+=1){const p=r[m],u=E.branch[m];p?.data!==u?.data&&(h=!0),p&&(v={...v,...p.data},h&&(f.props[`data_${d}`]=v),d+=1)}return(!E.url||e.href!==E.url.href||E.error!==i||o!==void 0&&o!==C.form||h)&&(f.props.page={error:i,params:t,route:{id:l?.id??null},state:{},status:a,url:new URL(e),form:o??null,data:h?v:C.data}),f}async function qe({loader:e,parent:t,url:r,params:a,route:i,server_data_node:l}){const o={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1,search_params:new Set},n=await e();return{node:n,loader:e,server:l,universal:n.universal?.load?{type:"data",data:null,uses:o}:null,data:l?.data??null,slash:n.universal?.trailingSlash??l?.slash}}function Ot(e,t,r){let a=e instanceof Request?e.url:e;const i=new URL(a,r);i.origin===r.origin&&(a=i.href.slice(r.origin.length));const l=he?(function(o,n,s){if(Q.size>0){const c=Ee(o,s),f=Q.get(c);if(f){if(performance.now()<f.ttl&&["default","force-cache","only-if-cached",void 0].includes(s?.cache))return new Response(f.body,f.init);Q.delete(c)}}return window.fetch(n,s)})(a,i.href,t):kt(a,t);return{resolved:i,promise:l}}function Ne(e,t){return e?.type==="data"?e:e?.type==="skip"?t??null:null}function It({error:e,url:t,route:r,params:a}){return{type:"loaded",state:{error:e,url:t,route:r,params:a,branch:[]},props:{page:Fe(C),constructors:[]}}}async function ht({id:e,invalidating:t,url:r,params:a,route:i,preload:l}){if(q?.id===e)return me.delete(q.token),q.promise;const{errors:o,layouts:n,leaf:s}=i,c=[...n,s];o.forEach(p=>p?.().catch(()=>{})),c.forEach(p=>p?.[1]().catch(()=>{}));const f=!!E.url&&e!==ve(E.url),y=!!E.route&&i.id!==E.route.id,v=(function(p,u){if(!p)return new Set(u.searchParams.keys());const w=new Set([...p.searchParams.keys(),...u.searchParams.keys()]);for(const U of w){const b=p.searchParams.getAll(U),R=u.searchParams.getAll(U);b.every(k=>R.includes(k))&&R.every(k=>b.includes(k))&&w.delete(U)}return w})(E.url,r);let h=!1;const d=c.map(async(p,u)=>{if(!p)return;const w=E.branch[u];return p[1]===w?.loader&&!(function(b,R,k,_,g,L){if(Ie)return!0;if(!g)return!1;if(g.parent&&b||g.route&&R||g.url&&k)return!0;for(const S of g.search_params)if(_.has(S))return!0;for(const S of g.params)if(L[S]!==E.params[S])return!0;for(const S of g.dependencies)if(fe.some($=>$(new URL(S))))return!0;return!1})(h,y,f,v,w.universal?.uses,a)?w:(h=!0,qe({loader:p[1],url:r,params:a,route:i,parent:async()=>{const b={};for(let R=0;R<u;R+=1)Object.assign(b,(await d[R])?.data);return b},server_data_node:Ne(p[0]?{type:"skip"}:null,p[0]?w?.server:void 0)}))});for(const p of d)p.catch(()=>{});const m=[];for(let p=0;p<c.length;p+=1)if(c[p])try{m.push(await d[p])}catch(u){if(u instanceof ke)return{type:"redirect",location:u.location};if(me.has(l))return It({error:await se(u,{params:a,url:r,route:{id:i.id}}),url:r,params:a,route:i});let w,U=xe(u);if(u instanceof be)w=u.body;else{if(await B.updated.check())return await rt(),await re(r);w=await se(u,{params:a,url:r,route:{id:i.id}})}const b=await jt(p,m,o);return b?ge({url:r,params:a,branch:m.slice(0,b.idx).concat(b.node),status:U,error:w,route:i}):await gt(r,{id:i.id},w,U)}else m.push(void 0);return ge({url:r,params:a,branch:m,status:200,error:null,route:i,form:t?void 0:null})}async function jt(e,t,r){for(;e--;)if(r[e]){let a=e;for(;!t[a];)a-=1;try{return{idx:a+1,node:{node:await r[e](),loader:r[e],data:{},server:null,universal:null}}}catch{continue}}}async function De({status:e,error:t,url:r,route:a}){const i={};try{const l=await qe({loader:$e,url:r,params:i,route:a,parent:()=>Promise.resolve({}),server_data_node:Ne(null)});return ge({url:r,params:i,branch:[l,{node:await ue(),loader:ue,universal:null,server:null,data:null}],status:e,error:t,route:null})}catch(l){if(l instanceof ke)return(async function(o,n,s,c){let f;n.invalidateAll&&Oe(),await X({type:"goto",url:He(o),keepfocus:n.keepFocus,noscroll:n.noScroll,replace_state:n.replaceState,state:n.state,redirect_count:s,nav_token:c,accept:()=>{n.invalidateAll&&(Ie=!0,f=[...ct.keys()]),n.invalidate&&n.invalidate.forEach(qt)}}),n.invalidateAll&&ie().then(ie).then(()=>{ct.forEach(({resource:y},v)=>{f?.includes(v)&&y.refresh?.()})})})(new URL(l.location,location.href),{},0);throw l}}async function we(e,t){if(e&&!ce(e,O,x.hash)){const r=await(async function(i){const l=i.href;if(pe.has(l))return pe.get(l);let o;try{const n=(async()=>{let s=await x.hooks.reroute({url:new URL(i),fetch:async(c,f)=>Ot(c,f,i).promise})??i;if(typeof s=="string"){const c=new URL(i);x.hash?c.hash=s:c.pathname=s,s=c}return s})();pe.set(l,n),o=await n}catch{return void pe.delete(l)}return o})(e);if(!r)return;const a=(function(i){return l=x.hash?i.hash.replace(/^#/,"").replace(/[?#].+/,""):i.pathname.slice(O.length),l.split("%25").map(decodeURI).join("%25")||"/";var l})(r);for(const i of Ce){const l=i.exec(a);if(l)return{id:ve(e),invalidating:t,route:i,params:yt(l),url:e}}}}function ve(e){return(x.hash?e.hash.replace(/^#/,""):e.pathname)+e.search}function mt({url:e,type:t,intent:r,delta:a,event:i,scroll:l}){let o=!1;const n=Be(E,r,e,t,l??null);a!==void 0&&(n.navigation.delta=a),i!==void 0&&(n.navigation.event=i);const s={...n.navigation,cancel:()=>{o=!0,n.reject(new Error("navigation cancelled"))}};return oe||ot.forEach(c=>c(s)),o?null:n}async function X({type:e,url:t,popped:r,keepfocus:a,noscroll:i,replace_state:l,state:o={},redirect_count:n=0,nav_token:s={},accept:c=nt,block:f=nt,event:y}){const v=J;J=s;const h=await we(t,!1),d=e==="enter"?Be(E,h,t,e):mt({url:t,type:e,delta:r?.delta,intent:h,scroll:r?.scroll,event:y});if(!d)return f(),void(J===s&&(J=v));const m=A,p=I;c(),oe=!0,he&&d.navigation.type!=="enter"&&B.navigating.set(ee.current=d.navigation);let u=h&&await ht(h);if(!u){if(ce(t,O,x.hash))return await re(t,l);u=await gt(t,{id:null},await se(new _e(404,"Not Found",`Not found: ${t.pathname}`),{url:t,params:{},route:{id:null}}),404,l)}if(t=h?.url||t,J!==s)return d.reject(new Error("navigation aborted")),!1;if(u.type==="redirect"){if(n<20)return await X({type:e,url:new URL(u.location,t),popped:r,keepfocus:a,noscroll:i,replace_state:l,state:o,redirect_count:n+1,nav_token:s}),void d.fulfil(void 0);u=await De({status:500,error:await se(new Error("Redirect loop"),{url:t,params:{},route:{id:null}}),url:t,route:{id:null}})}else u.props.page.status>=400&&await B.updated.check()&&(await rt(),await re(t,l));if(fe.length=0,Ie=!1,Te(m),ut(p),u.props.page.url.pathname!==t.pathname&&(t.pathname=u.props.page.url.pathname),o=r?r.state:o,!r){const g=l?0:1,L={[K]:A+=g,[Z]:I+=g,[Ke]:o};(l?history.replaceState:history.pushState).call(history,L,"",t),l||(function(S,$){let T=S+1;for(;M[T];)delete M[T],T+=1;for(T=$+1;te[T];)delete te[T],T+=1})(A,I)}const w=h&&q?.id===h.id?q.fork:null;let U;if(q=null,u.props.page.state=o,he){const g=(await Promise.all(Array.from($t,S=>S(d.navigation)))).filter(S=>typeof S=="function");if(g.length>0){let S=function(){g.forEach($=>{ne.delete($)})};g.push(S),g.forEach($=>{ne.add($)})}E=u.state,u.props.page&&(u.props.page.url=t);const L=w&&await w;L?U=L.commit():(at.$set(u.props),b=u.props.page,Object.assign(C,b),U=vt?.()),lt=!0}else await pt(u,Pe,!1);var b;const{activeElement:R}=document;await U,await ie(),await ie();let k=null;if(it){const g=r?r.scroll:i?G():null;g?scrollTo(g.x,g.y):(k=t.hash&&document.getElementById(wt(t)))?k.scrollIntoView():scrollTo(0,0)}const _=document.activeElement!==R&&document.activeElement!==document.body;a||_||(function(g,L=!0){const S=document.querySelector("[autofocus]");if(S)S.focus();else{const $=wt(g);if($&&document.getElementById($)){const{x:j,y:P}=G();setTimeout(()=>{const W=history.state;Ve=!0,location.replace(new URL(`#${$}`,location.href)),history.replaceState(W,"",g),L&&scrollTo(j,P),Ve=!1})}else{const j=document.body,P=j.getAttribute("tabindex");j.tabIndex=-1,j.focus({preventScroll:!0,focusVisible:!1}),P!==null?j.setAttribute("tabindex",P):j.removeAttribute("tabindex")}const T=getSelection();if(T&&T.type!=="None"){const j=[];for(let P=0;P<T.rangeCount;P+=1)j.push(T.getRangeAt(P));setTimeout(()=>{if(T.rangeCount===j.length){for(let P=0;P<T.rangeCount;P+=1){const W=j[P],Y=T.getRangeAt(P);if(W.commonAncestorContainer!==Y.commonAncestorContainer||W.startContainer!==Y.startContainer||W.endContainer!==Y.endContainer||W.startOffset!==Y.startOffset||W.endOffset!==Y.endOffset)return}T.removeAllRanges()}})}}})(t,!k),it=!0,u.props.page&&Object.assign(C,u.props.page),oe=!1,e==="popstate"&&ft(I),d.fulfil(void 0),d.navigation.to&&(d.navigation.to.scroll=G()),ne.forEach(g=>g(d.navigation)),B.navigating.set(ee.current=null)}async function gt(e,t,r,a,i){return e.origin!==Le||e.pathname!==location.pathname||st?await re(e,i):await De({status:a,error:r,url:e,route:t})}function se(e,t){if(e instanceof be)return e.body;const r=xe(e),a=(function(i){return i instanceof _e?i.text:"Internal Error"})(e);return x.hooks.handleError({error:e,event:t,status:r,message:a})??{message:a}}function qt(e){if(typeof e=="function")fe.push(e);else{const{href:t}=new URL(e,location.href);fe.push(r=>r.href===t)}}let Ve=!1;function Be(e,t,r,a,i=null){let l,o;const n=new Promise((s,c)=>{l=s,o=c});return n.catch(()=>{}),{navigation:{from:{params:e.params,route:{id:e.route?.id??null},url:e.url,scroll:G()},to:r&&{params:t?.params??null,route:{id:t?.route?.id??null},url:r,scroll:i},willUnload:!t,type:a,complete:n},fulfil:l,reject:o}}function Fe(e){return{data:e.data,error:e.error,form:e.form,params:e.params,route:e.route,state:e.state,status:e.status,url:e.url}}function Nt(e){const t=new URL(e);return t.hash=decodeURIComponent(e.hash),t}function wt(e){let t;if(x.hash){const[,,r]=e.hash.split("#",3);t=r??""}else t=e.hash.slice(1);return decodeURIComponent(t)}export{Pt as a,At as l,C as p,B as s};
